{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Dell/Desktop/gymZone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/Dell/Desktop/gymZone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Users/Dell/Desktop/gymZone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Dell\\\\Desktop\\\\gymZone\\\\src\\\\components\\\\cart.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useState, useEffect } from \"react\";\nimport { CartContext } from \"../contexts/cart-context\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar discountAmount;\nvar totalMarked;\nexport default function Cart() {\n  _s();\n\n  var _this = this;\n\n  var _useContext = useContext(CartContext),\n      dispatch = _useContext.dispatch;\n\n  var _useContext2 = useContext(CartContext),\n      itemsInCart = _useContext2.itemsInCart;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      total = _useState2[0],\n      setTotal = _useState2[1];\n\n  useEffect(function () {\n    var totalAmount = 0;\n    discountAmount = 0;\n    totalMarked = 0;\n    itemsInCart.forEach(function (item) {\n      totalMarked += item.markedprice * item.quantity;\n      totalAmount += (item.markedprice - item.discount / 100 * item.markedprice) * item.quantity;\n      discountAmount += item.discount / 100 * item.markedprice * item.quantity;\n    });\n    setTotal(totalAmount);\n  }, [itemsInCart]);\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var _yield$axios$get, data;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return axios.get(\"http://localhost:5000/api/cart\");\n\n          case 2:\n            _yield$axios$get = _context.sent;\n            data = _yield$axios$get.data;\n            console.log(data);\n            dispatch({\n              type: \"setCart\",\n              payload: data\n            });\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cartPage\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cartPage__items\",\n        children: function () {\n          if (itemsInCart.length === 0) return /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Nothing in cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 48\n          }, _this);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"stacked \",\n              children: itemsInCart.map(function (item) {\n                var flag = 0;\n                var price = (item.markedprice - item.discount / 100 * item.markedprice) * item.quantity;\n\n                if (item.quantity === 0) {\n                  flag = 1;\n                }\n\n                return /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"shoppingBag\",\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: item.imgsrc,\n                      alt: \"\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 62,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"primary-btn\",\n                      onClick: function onClick() {\n                        console.log(\"clicked\", item);\n                        dispatch({\n                          type: \"RemoveFromCart\",\n                          payload: item\n                        });\n                      },\n                      children: \"Remove\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 63,\n                      columnNumber: 25\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 61,\n                    columnNumber: 23\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"shoppingBag--information\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                        children: \"Brand X\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 75,\n                        columnNumber: 27\n                      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                          children: [\" \", item.text]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 77,\n                          columnNumber: 29\n                        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: [\"Quantity : \", item.quantity]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 78,\n                          columnNumber: 29\n                        }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"quantity-btn\",\n                          onClick: function onClick() {\n                            dispatch({\n                              type: \"Increase\",\n                              payload: item\n                            });\n                          },\n                          children: \"+\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 79,\n                          columnNumber: 29\n                        }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"quantity-btn\",\n                          disabled: flag === 0 ? false : true,\n                          onClick: function onClick() {\n                            return dispatch({\n                              type: \"Decrease\",\n                              payload: item\n                            });\n                          },\n                          children: \"-\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 88,\n                          columnNumber: 29\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 76,\n                        columnNumber: 27\n                      }, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 74,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [\" Rs.\", price, \" \", item.markedprice]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 100,\n                      columnNumber: 25\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 73,\n                    columnNumber: 23\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 60,\n                  columnNumber: 21\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 13\n          }, _this);\n        }()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), itemsInCart.length !== 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cartPage__place\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"place__detail\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \" PRICE DETAILS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"place__information\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"place__information__list\",\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Price items\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\" Rs \", totalMarked, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Discount\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"green_text\",\n                children: [\"Rs \", discountAmount, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \" Delivery charges\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"green_text\",\n                children: \"Free\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"place__total\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Total Amount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: total\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 16\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"green_text discount_message\",\n            children: [\"You will save \", discountAmount, \" on this order\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"orderButton\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"placeOrder\",\n              children: \"Place Order\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this) : \"\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(Cart, \"0Xg4bq9GIzRVnsPhffWJC/6xCvU=\");\n\n_c = Cart;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"sources":["C:/Users/Dell/Desktop/gymZone/src/components/cart.js"],"names":["useContext","useState","useEffect","CartContext","axios","discountAmount","totalMarked","Cart","dispatch","itemsInCart","total","setTotal","totalAmount","forEach","item","markedprice","quantity","discount","get","data","console","log","type","payload","length","map","flag","price","imgsrc","text"],"mappings":";;;;;;;AAAA,SAASA,UAAT,EAAoBC,QAApB,EAA6BC,SAA7B,QAA8C,OAA9C;AACA,SAASC,WAAT,QAA4B,0BAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AACA,IAAIC,cAAJ;AACA,IAAIC,WAAJ;AACA,eAAe,SAASC,IAAT,GAAgB;AAAA;;AAAA;;AAAA,oBACRP,UAAU,CAACG,WAAD,CADF;AAAA,MACrBK,QADqB,eACrBA,QADqB;;AAAA,qBAELR,UAAU,CAACG,WAAD,CAFL;AAAA,MAErBM,WAFqB,gBAErBA,WAFqB;;AAAA,kBAGJR,QAAQ,CAAC,CAAD,CAHJ;AAAA;AAAA,MAGtBS,KAHsB;AAAA,MAGhBC,QAHgB;;AAO7BT,EAAAA,SAAS,CAAC,YACV;AAEE,QAAIU,WAAW,GAAE,CAAjB;AACAP,IAAAA,cAAc,GAAE,CAAhB;AACAC,IAAAA,WAAW,GAAC,CAAZ;AAEAG,IAAAA,WAAW,CAACI,OAAZ,CAAoB,UAAAC,IAAI,EACtB;AACER,MAAAA,WAAW,IAAIQ,IAAI,CAACC,WAAL,GAAiBD,IAAI,CAACE,QAArC;AACAJ,MAAAA,WAAW,IAAK,CAACE,IAAI,CAACC,WAAL,GACdD,IAAI,CAACG,QAAL,GAAgB,GAAjB,GAAwBH,IAAI,CAACC,WADf,IAEhBD,IAAI,CAACE,QAFL;AAGAX,MAAAA,cAAc,IAAOS,IAAI,CAACG,QAAL,GAAgB,GAAjB,GAAwBH,IAAI,CAACC,WAA9B,GACnBD,IAAI,CAACE,QADL;AAED,KARH;AASEL,IAAAA,QAAQ,CAACC,WAAD,CAAR;AACH,GAjBQ,EAiBP,CAACH,WAAD,CAjBO,CAAT;AAkBAP,EAAAA,SAAS,wEAAC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEYE,KAAK,CAACc,GAAN,CAAU,gCAAV,CAFZ;;AAAA;AAAA;AAEDC,YAAAA,IAFC,oBAEDA,IAFC;AAGRC,YAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAX,YAAAA,QAAQ,CAAC;AAACc,cAAAA,IAAI,EAAC,SAAN;AAAgBC,cAAAA,OAAO,EAACJ;AAAxB,aAAD,CAAR;;AAJQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAD,IAKP,EALO,CAAT;AAMA,sBACE;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA,kBAGE,YAAM;AACN,cAAIV,WAAW,CAACe,MAAZ,KAAuB,CAA3B,EAA8B,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAP;AAC9B,8BACE;AAAA,mCACE;AAAI,cAAA,SAAS,EAAC,UAAd;AAAA,wBACGf,WAAW,CAACgB,GAAZ,CAAgB,UAACX,IAAD,EAAU;AACzB,oBAAIY,IAAI,GAAG,CAAX;AAEA,oBAAMC,KAAK,GACT,CAACb,IAAI,CAACC,WAAL,GACED,IAAI,CAACG,QAAL,GAAgB,GAAjB,GAAwBH,IAAI,CAACC,WAD/B,IAEAD,IAAI,CAACE,QAHP;;AAKA,oBAAIF,IAAI,CAACE,QAAL,KAAkB,CAAtB,EAAyB;AACvBU,kBAAAA,IAAI,GAAG,CAAP;AACD;;AACD,oCACE;AAAA,0CACE;AAAK,oBAAA,SAAS,EAAC,aAAf;AAAA,4CACE;AAAK,sBAAA,GAAG,EAAEZ,IAAI,CAACc,MAAf;AAAuB,sBAAA,GAAG,EAAC;AAA3B;AAAA;AAAA;AAAA;AAAA,6BADF,eAEE;AACE,sBAAA,SAAS,EAAC,aADZ;AAEE,sBAAA,OAAO,EAAE,mBAAM;AACbR,wBAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBP,IAAvB;AACAN,wBAAAA,QAAQ,CAAC;AAAEc,0BAAAA,IAAI,EAAE,gBAAR;AAA0BC,0BAAAA,OAAO,EAAET;AAAnC,yBAAD,CAAR;AACD,uBALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,eAaE;AAAK,oBAAA,SAAS,EAAC,0BAAf;AAAA,4CACE;AAAA,8CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADF,eAEE;AAAA,gDACE;AAAA,0CAAKA,IAAI,CAACe,IAAV;AAAA;AAAA;AAAA;AAAA;AAAA,iCADF,eAEE;AAAA,oDAAef,IAAI,CAACE,QAApB;AAAA;AAAA;AAAA;AAAA;AAAA,iCAFF,eAGE;AACE,0BAAA,SAAS,EAAC,cADZ;AAEE,0BAAA,OAAO,EAAE,mBAAM;AAEbR,4BAAAA,QAAQ,CAAC;AAAEc,8BAAAA,IAAI,EAAE,UAAR;AAAoBC,8BAAAA,OAAO,EAAET;AAA7B,6BAAD,CAAR;AACD,2BALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAHF,eAYE;AACE,0BAAA,SAAS,EAAC,cADZ;AAEE,0BAAA,QAAQ,EAAEY,IAAI,KAAK,CAAT,GAAa,KAAb,GAAqB,IAFjC;AAGE,0BAAA,OAAO,EAAE;AAAA,mCACPlB,QAAQ,CAAC;AAAEc,8BAAAA,IAAI,EAAE,UAAR;AAAoBC,8BAAAA,OAAO,EAAET;AAA7B,6BAAD,CADD;AAAA,2BAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAZF;AAAA;AAAA;AAAA;AAAA;AAAA,+BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,eA2BE;AAAA,yCAAUa,KAAV,OAAkBb,IAAI,CAACC,WAAvB;AAAA;AAAA;AAAA;AAAA;AAAA,6BA3BF;AAAA;AAAA;AAAA;AAAA;AAAA,2BAbF;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF;AA6CD,eAxDA;AADH;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,mBADF;AA+DD,SAjEA;AAHD;AAAA;AAAA;AAAA;AAAA,cADF,EAyECN,WAAW,CAACe,MAAZ,KAAuB,CAAvB,gBACC;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA,gCACI;AAAK,UAAA,SAAS,EAAC,eAAf;AAAA,iCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,gBADJ,eAII;AAAA;AAAA;AAAA;AAAA,gBAJJ,eAKI;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,iCACE;AAAI,YAAA,SAAS,EAAC,0BAAd;AAAA,oCACE;AAAA,sCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAA,mCAAWlB,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAKE;AAAA,sCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAM,gBAAA,SAAS,EAAC,YAAhB;AAAA,kCAAiCD,cAAjC;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,oBALF,eASE;AAAA,sCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAM,gBAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBATF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBALJ,eAqBI;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA,kCACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADH,eAEG;AAAA,sBAAKK;AAAL;AAAA;AAAA;AAAA;AAAA,kBAFH;AAAA;AAAA;AAAA;AAAA;AAAA,gBArBJ,eAyBI;AAAA,kCACA;AAAI,YAAA,SAAS,EAAC,6BAAd;AAAA,yCACeL,cADf;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,eAKA;AAAK,YAAA,SAAS,EAAC,aAAf;AAAA,mCACE;AAAQ,cAAA,SAAS,EAAC,YAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBALA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAzBJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,GAqCE,EA9GH;AAAA;AAAA;AAAA;AAAA;AAAA;AADF,mBADF;AAqHD;;GApJuBE,I;;KAAAA,I","sourcesContent":["import { useContext,useState,useEffect } from \"react\";\r\nimport { CartContext } from \"../contexts/cart-context\";\r\nimport axios from \"axios\"\r\nlet discountAmount;\r\nlet totalMarked;\r\nexport default function Cart() {\r\n  const { dispatch } = useContext(CartContext);\r\n  const { itemsInCart } = useContext(CartContext);\r\n  const [total,setTotal] = useState(0);\r\n \r\n\r\n\r\n  useEffect(()=>\r\n  {\r\n\r\n    let totalAmount =0;\r\n    discountAmount =0;\r\n    totalMarked=0;\r\n   \r\n    itemsInCart.forEach(item=>\r\n      {\r\n        totalMarked += item.markedprice*item.quantity;\r\n        totalAmount +=  (item.markedprice -\r\n          (item.discount / 100) * item.markedprice) *\r\n        item.quantity;\r\n        discountAmount +=  ((item.discount / 100) * item.markedprice)*\r\n        item.quantity\r\n      })\r\n      setTotal(totalAmount)\r\n  },[itemsInCart])\r\n  useEffect(async ()=>\r\n  {\r\n    const {data}= await axios.get(\"http://localhost:5000/api/cart\");\r\n    console.log(data)\r\n    dispatch({type:\"setCart\",payload:data})\r\n  },[])\r\n  return (\r\n    <>\r\n      <div className=\"cartPage\">\r\n        <div className=\"cartPage__items\">\r\n\r\n        \r\n        {(() => {\r\n          if (itemsInCart.length === 0) return <p>Nothing in cart</p>;\r\n          return (\r\n            <div >\r\n              <ul className=\"stacked \">\r\n                {itemsInCart.map((item) => {\r\n                  let flag = 0;\r\n                \r\n                  const price =\r\n                    (item.markedprice -\r\n                      (item.discount / 100) * item.markedprice) *\r\n                    item.quantity;\r\n\r\n                  if (item.quantity === 0) {\r\n                    flag = 1;\r\n                  }\r\n                  return (\r\n                    <li>\r\n                      <div className=\"shoppingBag\">\r\n                        <img src={item.imgsrc} alt=\"\" />\r\n                        <button\r\n                          className=\"primary-btn\"\r\n                          onClick={() => {\r\n                            console.log(\"clicked\", item);\r\n                            dispatch({ type: \"RemoveFromCart\", payload: item });\r\n                          }}\r\n                        >\r\n                          Remove\r\n                        </button>\r\n                      </div>\r\n                      <div className=\"shoppingBag--information\">\r\n                        <div>\r\n                          <h3>Brand X</h3>\r\n                          <div>\r\n                            <p> {item.text}</p>\r\n                            <p>Quantity : {item.quantity}</p>\r\n                            <button\r\n                              className=\"quantity-btn\"\r\n                              onClick={() => {\r\n                               \r\n                                dispatch({ type: \"Increase\", payload: item });\r\n                              }}\r\n                            >\r\n                              +\r\n                            </button>\r\n                            <button\r\n                              className=\"quantity-btn\"\r\n                              disabled={flag === 0 ? false : true}\r\n                              onClick={() =>\r\n                                dispatch({ type: \"Decrease\", payload: item })\r\n                              }\r\n                            >\r\n                              -\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div> Rs.{price} {item.markedprice}</div>\r\n                      </div>\r\n                    </li>\r\n                  );\r\n                })}\r\n              </ul>\r\n            </div>\r\n          );\r\n        })()}\r\n        </div>\r\n        {\r\n\r\n       itemsInCart.length !== 0 ? \r\n        <div className=\"cartPage__place\">\r\n            <div className=\"place__detail\">\r\n             <h2> PRICE DETAILS</h2>\r\n            </div>\r\n            <hr/>\r\n            <div className=\"place__information\">\r\n              <ul className=\"place__information__list\">\r\n                <li >\r\n                    <span>Price items</span>\r\n                    <span> Rs {totalMarked} </span>\r\n                </li>\r\n                <li>\r\n                  <span>Discount</span>\r\n                  <span className=\"green_text\">Rs {discountAmount} </span>\r\n                </li>\r\n                <li>\r\n                    <span> Delivery charges</span>\r\n                    <span className=\"green_text\">Free</span>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"place__total\">\r\n               <h2>Total Amount</h2>\r\n               <h4>{total}</h4>\r\n            </div>\r\n            <div >\r\n            <h2 className=\"green_text discount_message\">\r\n            You will save {discountAmount} on this order\r\n            </h2>\r\n               \r\n            <div className=\"orderButton\">\r\n              <button className=\"placeOrder\">Place Order</button>\r\n            </div> \r\n            </div>\r\n          \r\n        </div>\r\n        :\"\"\r\n        }\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}