{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Dell/Desktop/gymZone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"C:/Users/Dell/Desktop/gymZone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"C:/Users/Dell/Desktop/gymZone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Dell/Desktop/gymZone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import{useEffect,useState,useContext}from\"react\";import{CartContext}from\"../contexts/cart-context\";import PriceFilter from\"../components/pricefilter\";import{getSortedData}from\"../someextrafunctionality.js/sorted\";import{FilterContext}from\"../contexts/filter-context\";import{Link}from\"react-router-dom\";import{getSearchedProducts}from\"../someextrafunctionality.js/searchedProducts\";import SearchedText from\"../components/SearchedText\";import\"../filterDesign.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function FoodAndDrinks(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),FoodAndDrinks=_useState2[0],setFoodAndDrinks=_useState2[1];var _useContext=useContext(CartContext),dispatch=_useContext.dispatch,itemsInCart=_useContext.itemsInCart,itemsInWishList=_useContext.itemsInWishList;var _useContext2=useContext(FilterContext),sortBy=_useContext2.sortBy;var _useContext3=useContext(FilterContext),saveSearch=_useContext3.saveSearch,dispatche=_useContext3.dispatche;useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:5000/api/foodanddrinks\");case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setFoodAndDrinks([].concat(_toConsumableArray(FoodAndDrinks),_toConsumableArray(data)));console.log(\"from my backend\",data,data[0]._id);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);})),[]);useEffect(function(){return function(){return dispatche({type:\"saveSearchText\",payload:\"\"});};},[]);var sortedData=getSortedData(FoodAndDrinks,sortBy);var searchedProducts=getSearchedProducts(sortedData,saveSearch);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(SearchedText,{text:saveSearch}),/*#__PURE__*/_jsxs(\"div\",{className:\"filterDesign\",children:[/*#__PURE__*/_jsx(PriceFilter,{}),/*#__PURE__*/_jsx(\"div\",{className:\"cards filterDesign__right\",children:searchedProducts.map(function(foodanddrink){var price=foodanddrink.markedprice-foodanddrink.discount/100*foodanddrink.markedprice;var index=itemsInCart.findIndex(function(item){return item.id===foodanddrink.id&&item.text===foodanddrink.text;});var indexwl=itemsInWishList.findIndex(function(item){return item.id===foodanddrink.id&&item.text===foodanddrink.text;});return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(Link,{to:\"/products/\".concat(foodanddrink._id),children:/*#__PURE__*/_jsx(\"img\",{className:\"card__img\",src:foodanddrink.imgsrc,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card__information\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"card__brand\",children:\"Brand x\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"card__description\",children:foodanddrink.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"card__price\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Rs.\",price,\" \"]}),/*#__PURE__*/_jsx(\"span\",{className:\"card__price-marked\",children:foodanddrink.markedprice}),/*#__PURE__*/_jsxs(\"span\",{className:\"card__price-discount\",children:[\"( \",foodanddrink.discount,\"% off)\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{class:\"after\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:index===-1?\"primary-btn btn--hover\":\"primary-btn-added btn--hover\",disabled:index===-1?false:true,onClick:function onClick(){dispatch({type:\"AddToCart\",payload:foodanddrink});},children:\"Add to cart\"}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn btn--hover\",style:indexwl===-1?{display:\"\"}:{display:\"none\"},onClick:function onClick(){dispatch({type:\"AddToWishList\",payload:foodanddrink});},children:\"Move To WishList\"}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn btn--hover\",style:indexwl!==-1?{display:\"\"}:{display:\"none\"},onClick:function onClick(){dispatch({type:\"RemoveFromWishList\",payload:foodanddrink});},children:\"Remove From WishList\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card__price\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Rs.\",price,\" \"]}),/*#__PURE__*/_jsx(\"span\",{className:\"card__price-marked\",children:foodanddrink.markedprice}),/*#__PURE__*/_jsxs(\"span\",{className:\"card__price-discount\",children:[\"( \",foodanddrink.discount,\"% off)\"]})]})]})})]});})})]})]});}","map":{"version":3,"sources":["C:/Users/Dell/Desktop/gymZone/src/components/foodanddrink.js"],"names":["axios","useEffect","useState","useContext","CartContext","PriceFilter","getSortedData","FilterContext","Link","getSearchedProducts","SearchedText","FoodAndDrinks","setFoodAndDrinks","dispatch","itemsInCart","itemsInWishList","sortBy","saveSearch","dispatche","get","data","console","log","_id","type","payload","sortedData","searchedProducts","map","foodanddrink","price","markedprice","discount","index","findIndex","item","id","text","indexwl","imgsrc","display"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState, useContext } from \"react\";\r\nimport { CartContext } from \"../contexts/cart-context\";\r\nimport PriceFilter from \"../components/pricefilter\";\r\nimport { getSortedData } from \"../someextrafunctionality.js/sorted\";\r\nimport { FilterContext } from \"../contexts/filter-context\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {getSearchedProducts} from \"../someextrafunctionality.js/searchedProducts\";\r\nimport SearchedText from \"../components/SearchedText\"\r\nimport \"../filterDesign.css\"\r\nexport default function FoodAndDrinks() {\r\n  const [FoodAndDrinks, setFoodAndDrinks] = useState([]);\r\n  const { dispatch, itemsInCart, itemsInWishList } = useContext(CartContext);\r\n  const { sortBy } = useContext(FilterContext);\r\n  const {saveSearch,dispatche} = useContext(FilterContext);\r\n \r\n\r\n  useEffect(async ()=>{\r\n    try{\r\n      const {data}= await axios.get(\"http://localhost:5000/api/foodanddrinks\");\r\n      setFoodAndDrinks([...FoodAndDrinks, ...data]);\r\n      console.log(\"from my backend\",data,data[0]._id)\r\n    }\r\n  catch(error){\r\n    console.log(error)\r\n  }\r\n  },[])\r\n\r\n  useEffect(()=>\r\n{\r\n  return ()=>dispatche({type:\"saveSearchText\",payload:\"\"})\r\n},[])\r\n\r\n  const sortedData = getSortedData(FoodAndDrinks, sortBy);\r\n  const searchedProducts = getSearchedProducts(sortedData,saveSearch);\r\n  return (\r\n    <div>\r\n      <SearchedText text={saveSearch}/>\r\n      <div className=\"filterDesign\">\r\n      <PriceFilter />\r\n\r\n      <div className=\"cards filterDesign__right\">\r\n        {searchedProducts.map((foodanddrink) => {\r\n          const price =\r\n            foodanddrink.markedprice -\r\n            (foodanddrink.discount / 100) * foodanddrink.markedprice;\r\n\r\n          const index = itemsInCart.findIndex(\r\n            (item) =>\r\n              item.id === foodanddrink.id && item.text === foodanddrink.text\r\n          );\r\n          const indexwl = itemsInWishList.findIndex(\r\n            (item) =>\r\n              item.id === foodanddrink.id && item.text === foodanddrink.text\r\n          );\r\n\r\n          return (\r\n            <div className=\"card\">\r\n            <Link to={`/products/${foodanddrink._id}`}>\r\n              <img className=\"card__img\" src={foodanddrink.imgsrc} alt=\"\" />\r\n              </Link>\r\n              <div className=\"card__information\">\r\n                <h3 className=\"card__brand\">Brand x</h3>\r\n                <h4 className=\"card__description\">{foodanddrink.text}</h4>\r\n                <div className=\"card__price\">\r\n                  <span>Rs.{price} </span>\r\n                  <span className=\"card__price-marked\">\r\n                    {foodanddrink.markedprice}\r\n                  </span>\r\n                  <span className=\"card__price-discount\">\r\n                    ( {foodanddrink.discount}% off)\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"after\">\r\n                <div>\r\n                  <button\r\n                    className={\r\n                      index === -1\r\n                        ? \"primary-btn btn--hover\"\r\n                        : \"primary-btn-added btn--hover\"\r\n                    }\r\n                    disabled={index === -1 ? false : true}\r\n                    onClick={() => {\r\n                      dispatch({\r\n                        type: \"AddToCart\",\r\n                        payload: foodanddrink\r\n                      });\r\n                    }}\r\n                  >\r\n                    Add to cart\r\n                  </button>\r\n                  <button\r\n                    className=\"secondary-btn btn--hover\"\r\n                    style={\r\n                      indexwl === -1 ? { display: \"\" } : { display: \"none\" }\r\n                    }\r\n                    onClick={() => {\r\n                      dispatch({\r\n                        type: \"AddToWishList\",\r\n                        payload: foodanddrink\r\n                      });\r\n                    }}\r\n                  >\r\n                    Move To WishList\r\n                  </button>\r\n                  <button\r\n                    className=\"secondary-btn btn--hover\"\r\n                    style={\r\n                      indexwl !== -1 ? { display: \"\" } : { display: \"none\" }\r\n                    }\r\n                    onClick={() => {\r\n                      dispatch({\r\n                        type: \"RemoveFromWishList\",\r\n                        payload: foodanddrink\r\n                      });\r\n                    }}\r\n                  >\r\n                    Remove From WishList\r\n                  </button>\r\n                  <div className=\"card__price\">\r\n                    <span>Rs.{price} </span>\r\n                    <span className=\"card__price-marked\">\r\n                      {foodanddrink.markedprice}\r\n                    </span>\r\n                    <span className=\"card__price-discount\">\r\n                      ( {foodanddrink.discount}% off)\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}